{"ast":null,"code":"import _classCallCheck from \"/Users/laurentnguyen/Desktop/INF3710_TutorielApp-main/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/laurentnguyen/Desktop/INF3710_TutorielApp-main/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { MatPaginator } from '@angular/material/paginator';\nimport { CommunicationService } from '../communication.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../communication.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/expansion\";\nvar _c0 = [\"varietyPaginator\"];\n\nfunction ModifyVarietyComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵelementStart(1, \"mat-expansion-panel\");\n    i0.ɵɵelementStart(2, \"mat-expansion-panel-header\");\n    i0.ɵɵelementStart(3, \"mat-panel-title\");\n    i0.ɵɵelementStart(4, \"p\", 5);\n    i0.ɵɵlistener(\"keypress\", function ModifyVarietyComponent_div_4_Template_p_keypress_4_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.isLetterKeyPress($event, 20);\n    })(\"blur\", function ModifyVarietyComponent_div_4_Template_p_blur_4_listener($event) {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var i_r3 = restoredCtx.index;\n      var ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.change($event, i_r3, \"name\");\n    });\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function ModifyVarietyComponent_div_4_Template_button_click_6_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var i_r3 = restoredCtx.index;\n      var ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.updateVariety(i_r3);\n    });\n    i0.ɵɵelement(7, \"i\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 8);\n    i0.ɵɵelement(9, \"i\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"ul\");\n    i0.ɵɵelementStart(11, \"li\");\n    i0.ɵɵtext(12, \"Ann\\xE9e de mise en march\\xE9 : \");\n    i0.ɵɵelementStart(13, \"p\", 5);\n    i0.ɵɵlistener(\"keypress\", function ModifyVarietyComponent_div_4_Template_p_keypress_13_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.isNumberKeyPress($event);\n    })(\"blur\", function ModifyVarietyComponent_div_4_Template_p_blur_13_listener($event) {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var i_r3 = restoredCtx.index;\n      var ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.change($event, i_r3, \"year\");\n    });\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"li\");\n    i0.ɵɵtext(16, \"Description pour le semis : \");\n    i0.ɵɵelementStart(17, \"p\", 5);\n    i0.ɵɵlistener(\"keypress\", function ModifyVarietyComponent_div_4_Template_p_keypress_17_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.isLetterKeyPress($event, 50);\n    })(\"blur\", function ModifyVarietyComponent_div_4_Template_p_blur_17_listener($event) {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var i_r3 = restoredCtx.index;\n      var ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.change($event, i_r3, \"description\");\n    });\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"li\");\n    i0.ɵɵtext(20, \"Plantation : \");\n    i0.ɵɵelementStart(21, \"p\", 5);\n    i0.ɵɵlistener(\"keypress\", function ModifyVarietyComponent_div_4_Template_p_keypress_21_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.isLetterKeyPress($event, 50);\n    })(\"blur\", function ModifyVarietyComponent_div_4_Template_p_blur_21_listener($event) {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var i_r3 = restoredCtx.index;\n      var ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.change($event, i_r3, \"plantation\");\n    });\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"li\");\n    i0.ɵɵtext(24, \"Entretien : \");\n    i0.ɵɵelementStart(25, \"p\", 5);\n    i0.ɵɵlistener(\"keypress\", function ModifyVarietyComponent_div_4_Template_p_keypress_25_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.isLetterKeyPress($event, 50);\n    })(\"blur\", function ModifyVarietyComponent_div_4_Template_p_blur_25_listener($event) {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var i_r3 = restoredCtx.index;\n      var ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.change($event, i_r3, \"maintenance\");\n    });\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"li\");\n    i0.ɵɵtext(28, \"R\\xE9colte : \");\n    i0.ɵɵelementStart(29, \"p\", 5);\n    i0.ɵɵlistener(\"keypress\", function ModifyVarietyComponent_div_4_Template_p_keypress_29_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.isLetterKeyPress($event, 50);\n    })(\"blur\", function ModifyVarietyComponent_div_4_Template_p_blur_29_listener($event) {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var i_r3 = restoredCtx.index;\n      var ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.change($event, i_r3, \"harvest\");\n    });\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"li\");\n    i0.ɵɵtext(32, \"P\\xE9riode de mise en place : \");\n    i0.ɵɵelementStart(33, \"p\", 5);\n    i0.ɵɵlistener(\"keypress\", function ModifyVarietyComponent_div_4_Template_p_keypress_33_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.isNumberKeyPress($event);\n    })(\"blur\", function ModifyVarietyComponent_div_4_Template_p_blur_33_listener($event) {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var i_r3 = restoredCtx.index;\n      var ctx_r19 = i0.ɵɵnextContext();\n      return ctx_r19.change($event, i_r3, \"plantationPeriod\");\n    });\n    i0.ɵɵtext(34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"li\");\n    i0.ɵɵtext(36, \"P\\xE9riode de r\\xE9colte : \");\n    i0.ɵɵelementStart(37, \"p\", 5);\n    i0.ɵɵlistener(\"keypress\", function ModifyVarietyComponent_div_4_Template_p_keypress_37_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.isNumberKeyPress($event);\n    })(\"blur\", function ModifyVarietyComponent_div_4_Template_p_blur_37_listener($event) {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var i_r3 = restoredCtx.index;\n      var ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.change($event, i_r3, \"harvestPeriod\");\n    });\n    i0.ɵɵtext(38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"li\");\n    i0.ɵɵtext(40, \"Type de sol : \");\n    i0.ɵɵelementStart(41, \"p\");\n    i0.ɵɵtext(42);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"li\");\n    i0.ɵɵtext(44, \"Niveau d'adaptation : \");\n    i0.ɵɵelementStart(45, \"p\");\n    i0.ɵɵtext(46);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(47, \"li\");\n    i0.ɵɵtext(48, \"Version : \");\n    i0.ɵɵelementStart(49, \"p\", 5);\n    i0.ɵɵlistener(\"keypress\", function ModifyVarietyComponent_div_4_Template_p_keypress_49_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r22 = i0.ɵɵnextContext();\n      return ctx_r22.isLetterKeyPress($event, 20);\n    })(\"blur\", function ModifyVarietyComponent_div_4_Template_p_blur_49_listener($event) {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var i_r3 = restoredCtx.index;\n      var ctx_r23 = i0.ɵɵnextContext();\n      return ctx_r23.change($event, i_r3, \"version\");\n    });\n    i0.ɵɵtext(50);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(51, \"li\");\n    i0.ɵɵtext(52, \"Sememcier : \");\n    i0.ɵɵelementStart(53, \"p\");\n    i0.ɵɵtext(54);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(55, \"li\");\n    i0.ɵɵtext(56, \"Commentaires : \");\n    i0.ɵɵelementStart(57, \"p\", 5);\n    i0.ɵɵlistener(\"keypress\", function ModifyVarietyComponent_div_4_Template_p_keypress_57_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.commentMaxLength($event);\n    })(\"blur\", function ModifyVarietyComponent_div_4_Template_p_blur_57_listener($event) {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var i_r3 = restoredCtx.index;\n      var ctx_r25 = i0.ɵɵnextContext();\n      return ctx_r25.change($event, i_r3, \"comments\");\n    });\n    i0.ɵɵtext(58);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var variety_r2 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(variety_r2.name);\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(variety_r2.year);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(variety_r2.description);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(variety_r2.plantation);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(variety_r2.maintenance);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(variety_r2.harvest);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(variety_r2.plantationPeriod);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(variety_r2.harvestPeriod);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(variety_r2.soilType);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(variety_r2.adaptation);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(variety_r2.version);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(variety_r2.seedmanName);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(variety_r2.comments);\n  }\n}\n\nfunction ModifyVarietyComponent_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"json\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var variety_r26 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, variety_r26), \" \");\n  }\n}\n\nexport var ModifyVarietyComponent = /*#__PURE__*/(function () {\n  var ModifyVarietyComponent = /*#__PURE__*/function () {\n    function ModifyVarietyComponent(communicationService) {\n      _classCallCheck(this, ModifyVarietyComponent);\n\n      this.communicationService = communicationService;\n    }\n\n    _createClass(ModifyVarietyComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.getVarieties();\n        console.log(this.varieties);\n      }\n    }, {\n      key: \"change\",\n      value: function change(event, index, attribute) {\n        // const varietyIndex = this.varieties.findIndex((variety) => { return variety.varietyId === varietyId });\n        this.varieties[index][attribute] = event.target.textContent;\n        event.target.textContent = this.varieties[index][attribute];\n      }\n    }, {\n      key: \"getVarieties\",\n      value: function getVarieties() {\n        var _this = this;\n\n        this.communicationService.getVarieties().subscribe(function (varieties) {\n          _this.varieties = varieties;\n        });\n      }\n    }, {\n      key: \"deleteHotel\",\n      value: function deleteHotel(varietyId) {\n        var _this2 = this;\n\n        this.communicationService.deleteVariety(varietyId).subscribe(function (res) {\n          _this2.getVarieties();\n        });\n      }\n    }, {\n      key: \"updateVariety\",\n      value: function updateVariety(i) {\n        var _this3 = this;\n\n        this.communicationService.updateVariety(this.varieties[i]).subscribe(function (res) {\n          _this3.getVarieties();\n        });\n      }\n    }, {\n      key: \"isNumberKeyPress\",\n      value: function isNumberKeyPress(event) {\n        var res = /[0-9]/.test(event.key);\n        if (!res || event.target.textContent.length === 4) event.preventDefault();\n      }\n    }, {\n      key: \"isLetterKeyPress\",\n      value: function isLetterKeyPress(event, maxChar) {\n        var lowerCase = /[a-z]/.test(event.key);\n        var upperCase = /[A-Z]/.test(event.key);\n        if (!lowerCase && !upperCase || event.target.textContent.length === maxChar) event.preventDefault();\n      }\n    }, {\n      key: \"commentMaxLength\",\n      value: function commentMaxLength(event) {\n        var commentMaxLength = 250;\n        if (event.target.textContent.length === commentMaxLength) event.preventDefault();\n      }\n    }]);\n\n    return ModifyVarietyComponent;\n  }();\n\n  ModifyVarietyComponent.ɵfac = function ModifyVarietyComponent_Factory(t) {\n    return new (t || ModifyVarietyComponent)(i0.ɵɵdirectiveInject(i1.CommunicationService));\n  };\n\n  ModifyVarietyComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ModifyVarietyComponent,\n    selectors: [[\"app-modify-variety\"]],\n    viewQuery: function ModifyVarietyComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        var _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.varietyPaginator = _t.first);\n      }\n    },\n    decls: 6,\n    vars: 2,\n    consts: [[\"id\", \"variety\"], [1, \"divider\"], [\"class\", \"variety-container\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"variety-container\"], [\"contenteditable\", \"true\", 3, \"keypress\", \"blur\"], [\"type\", \"button\", 1, \"submitbtn\", 3, \"click\"], [1, \"fa\", \"fa-edit\"], [\"type\", \"button\", 1, \"deletebtn\"], [1, \"fa\", \"fa-trash-o\"]],\n    template: function ModifyVarietyComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h1\");\n        i0.ɵɵtext(2, \"Vari\\xE9t\\xE9s\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"div\", 1);\n        i0.ɵɵtemplate(4, ModifyVarietyComponent_div_4_Template, 59, 13, \"div\", 2);\n        i0.ɵɵtemplate(5, ModifyVarietyComponent_p_5_Template, 3, 3, \"p\", 3);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.varieties);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.varieties);\n      }\n    },\n    directives: [i2.NgForOf, i3.MatExpansionPanel, i3.MatExpansionPanelHeader, i3.MatExpansionPanelTitle],\n    pipes: [i2.JsonPipe],\n    styles: [\"#variety[_ngcontent-%COMP%]{background-color:var(--theme-background);font-family:Roboto,sans-serif;padding:3%;text-align:center}.divider[_ngcontent-%COMP%]{border-bottom:1px solid var(--theme-blue);margin:auto auto 25px;width:50%}h1[_ngcontent-%COMP%]{text-align:center;margin:2% auto;width:75%;background-color:var(--theme-blue)}mat-expansion-panel[_ngcontent-%COMP%]{background-color:#fff;width:75%;margin:.5% auto;box-shadow:1px 1px 5px #888;white-space:normal}mat-panel-title[_ngcontent-%COMP%]{display:grid;grid-template-columns:80% 10% 10%}mat-panel-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:2%;text-align:left}li[_ngcontent-%COMP%]{list-style-type:none;display:grid;grid-template-columns:25% 75%;margin:1% 3% 1% 0}li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:1%;border:1px solid black}.deletebtn[_ngcontent-%COMP%]{border-radius:4px;color:#fff;background-color:var(--theme-purple);border-style:none;float:right}.submitbtn[_ngcontent-%COMP%]{border-radius:4px;border-style:none;margin-right:10px;color:#fff;background-color:var(--theme-blue);float:right}\"]\n  });\n  return ModifyVarietyComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}